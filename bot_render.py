import logging
import os
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, CallbackQueryHandler, ContextTypes
import random
from keep_alive import keep_alive

# –ó–∞–ø—É—Å–∫–∞–µ–º keep-alive —Å–µ—Ä–≤–µ—Ä –¥–ª—è Render
keep_alive()

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

# –ë–∞–∑–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π
QUESTIONS = {
    'junior': [
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ü–û?',
            'options': [
                '–ü—Ä–æ—Ü–µ—Å—Å –≤—ã—è–≤–ª–µ–Ω–∏—è –¥–µ—Ñ–µ–∫—Ç–æ–≤ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–º –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–∏',
                '–ü—Ä–æ—Ü–µ—Å—Å –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞',
                '–ü—Ä–æ—Ü–µ—Å—Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º',
                '–ü—Ä–æ—Ü–µ—Å—Å —É–¥–∞–ª–µ–Ω–∏—è –±–∞–≥–æ–≤'
            ],
            'correct': 0,
            'explanation': '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ü–û - —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –º–µ–∂–¥—É —Ä–µ–∞–ª—å–Ω—ã–º –∏ –æ–∂–∏–¥–∞–µ–º—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—ã.'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ –±–∞–≥ (–¥–µ—Ñ–µ–∫—Ç)?',
            'options': [
                '–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ—Ç –æ–∂–∏–¥–∞–µ–º–æ–≥–æ',
                '–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å',
                '–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫ –ø—Ä–æ–¥—É–∫—Ç—É',
                '–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π'
            ],
            'correct': 0,
            'explanation': '–ë–∞–≥ - —ç—Ç–æ –æ—à–∏–±–∫–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ, –≤—ã–∑—ã–≤–∞—é—â–∞—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–ª–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.'
        },
        {
            'question': '–ö–∞–∫–∏–µ –±—ã–≤–∞—é—Ç –≤–∏–¥—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ –∑–Ω–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã?',
            'options': [
                '–ß–µ—Ä–Ω—ã–π —è—â–∏–∫, –±–µ–ª—ã–π —è—â–∏–∫, —Å–µ—Ä—ã–π —è—â–∏–∫',
                '–ë—ã—Å—Ç—Ä–æ–µ –∏ –º–µ–¥–ª–µ–Ω–Ω–æ–µ',
                '–ü—Ä–æ—Å—Ç–æ–µ –∏ —Å–ª–æ–∂–Ω–æ–µ',
                '–†—É—á–Ω–æ–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ'
            ],
            'correct': 0,
            'explanation': '–ß–µ—Ä–Ω—ã–π —è—â–∏–∫ (–±–µ–∑ –∑–Ω–∞–Ω–∏—è –∫–æ–¥–∞), –±–µ–ª—ã–π —è—â–∏–∫ (—Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –∫–æ–¥—É), —Å–µ—Ä—ã–π —è—â–∏–∫ (—á–∞—Å—Ç–∏—á–Ω–æ–µ –∑–Ω–∞–Ω–∏–µ).'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?',
            'options': [
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã —Å—Ç–∞—Ä–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏'
            ],
            'correct': 0,
            'explanation': '–†–µ–≥—Ä–µ—Å—Å–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –Ω–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Å–ª–æ–º–∞–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–µ—Å—Ç-–∫–µ–π—Å?',
            'options': [
                '–î–æ–∫—É–º–µ–Ω—Ç —Å –Ω–∞–±–æ—Ä–æ–º —à–∞–≥–æ–≤, –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –æ–∂–∏–¥–∞–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤',
                '–°–ø–∏—Å–æ–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –±–∞–≥–æ–≤',
                '–ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è',
                '–û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏'
            ],
            'correct': 0,
            'explanation': '–¢–µ—Å—Ç-–∫–µ–π—Å –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏–ª–∏ —Å—Ü–µ–Ω–∞—Ä–∏–π.'
        },
        {
            'question': '–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏?',
            'options': [
                '–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º',
                '–°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è',
                '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã',
                '–î–∏–∑–∞–π–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞'
            ],
            'correct': 0,
            'explanation': '–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –¥–µ–ª–∞–µ—Ç —Ç–æ, —á—Ç–æ –¥–æ–ª–∂–Ω–∞ –¥–µ–ª–∞—Ç—å.'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ –¥—ã–º–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (smoke testing)?',
            'options': [
                '–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –¥—ã–º—É',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏',
                '–§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º'
            ],
            'correct': 0,
            'explanation': 'Smoke testing - –±–µ–≥–ª–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –æ –Ω–∞—á–∞–ª–µ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.'
        },
        {
            'question': '–ö–∞–∫–æ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —É –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –±–∞–≥–∞?',
            'options': [
                'Highest/Critical - —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è',
                'Low - –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ—Ç–æ–º',
                'Medium - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–µ–ª–∏–∑–µ',
                'Trivial - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è'
            ],
            'correct': 0,
            'explanation': '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã –∏ —Ç—Ä–µ–±—É—é—Ç —Å—Ä–æ—á–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (verification)?',
            'options': [
                '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏',
                '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ –æ–∂–∏–¥–∞–Ω–∏—è–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
                '–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤',
                '–ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤'
            ],
            'correct': 0,
            'explanation': '–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å: "–ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –º—ã —Å–æ–∑–¥–∞–µ–º –ø—Ä–æ–¥—É–∫—Ç?"'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ –≤–∞–ª–∏–¥–∞—Ü–∏—è (validation)?',
            'options': [
                '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ –æ–∂–∏–¥–∞–Ω–∏—è–º –∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
                '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏',
                '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã',
                '–£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã'
            ],
            'correct': 0,
            'explanation': '–í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å: "–°–æ–∑–¥–∞–µ–º –ª–∏ –º—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç?"'
        }
    ],
    'middle': [
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?',
            'options': [
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∏'
            ],
            'correct': 0,
            'explanation': 'API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã.'
        },
        {
            'question': '–ö–∞–∫–∏–µ HTTP –º–µ—Ç–æ–¥—ã –≤—ã –∑–Ω–∞–µ—Ç–µ?',
            'options': [
                'GET, POST, PUT, DELETE, PATCH',
                'SEND, RECEIVE, UPDATE',
                'READ, WRITE, EXECUTE',
                'OPEN, CLOSE, SAVE'
            ],
            'correct': 0,
            'explanation': 'GET (–ø–æ–ª—É—á–∏—Ç—å), POST (—Å–æ–∑–¥–∞—Ç—å), PUT (–æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é), DELETE (—É–¥–∞–ª–∏—Ç—å), PATCH (—á–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ).'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ SQL –∏–Ω—ä–µ–∫—Ü–∏—è?',
            'options': [
                '–í–∏–¥ –∞—Ç–∞–∫–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π SQL –∫–æ–¥ –≤–Ω–µ–¥—Ä—è–µ—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å',
                '–ú–µ—Ç–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö',
                '–°–ø–æ—Å–æ–± —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è',
                '–¢–∏–ø –∏–Ω–¥–µ–∫—Å–∞ –≤ –ë–î'
            ],
            'correct': 0,
            'explanation': 'SQL injection - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ SQL –∫–æ–º–∞–Ω–¥—ã.'
        },
        {
            'question': '–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏?',
            'options': [
                '–ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π',
                '–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã',
                '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã',
                '–£–¥–æ–±—Å—Ç–≤–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞'
            ],
            'correct': 0,
            'explanation': '–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ CI/CD?',
            'options': [
                'Continuous Integration/Continuous Delivery - –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –¥–æ—Å—Ç–∞–≤–∫–∞',
                'Code Integration/Code Delivery',
                'Computer Integration/Computer Delivery',
                'Critical Integration/Critical Delivery'
            ],
            'correct': 0,
            'explanation': 'CI/CD - –ø—Ä–∞–∫—Ç–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∫–æ–¥–∞.'
        },
        {
            'question': '–ö–∞–∫–æ–π –∫–æ–¥ –æ—Ç–≤–µ—Ç–∞ HTTP –æ–∑–Ω–∞—á–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å?',
            'options': [
                '200 OK',
                '404 Not Found',
                '500 Internal Server Error',
                '403 Forbidden'
            ],
            'correct': 0,
            'explanation': '–ö–æ–¥ 200 –æ–∑–Ω–∞—á–∞–µ—Ç —É—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞. 2xx - —É—Å–ø–µ—Ö, 4xx - –æ—à–∏–±–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞, 5xx - –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ mockito/mock –æ–±—ä–µ–∫—Ç?',
            'options': [
                '–ò–º–∏—Ç–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è',
                '–†–µ–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö',
                '–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                '–¢–∏–ø –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π'
            ],
            'correct': 0,
            'explanation': 'Mock –æ–±—ä–µ–∫—Ç—ã –∏–º–∏—Ç–∏—Ä—É—é—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –∫–æ–¥–∞.'
        },
        {
            'question': '–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø DRY –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏?',
            'options': [
                'Don\'t Repeat Yourself - –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–π—Å—è',
                'Do Repeat Yourself - –ø–æ–≤—Ç–æ—Ä—è–π —Å–µ–±—è',
                'Delete Repeated Years',
                'Debug Ready Yearly'
            ],
            'correct': 0,
            'explanation': 'DRY - –ø—Ä–∏–Ω—Ü–∏–ø –∏–∑–±–µ–≥–∞–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∫–ª–∞—Å—Å—ã.'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ Page Object Model (POM)?',
            'options': [
                '–ü–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏, –≥–¥–µ –∫–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - —ç—Ç–æ –∫–ª–∞—Å—Å',
                '–ú–æ–¥–µ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö',
                '–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏',
                '–ú–µ—Ç–æ–¥ —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è'
            ],
            'correct': 0,
            'explanation': 'POM –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–∑–¥–∞—Ç—å –±–æ–ª–µ–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏ —á–∏—Ç–∞–µ–º—ã–µ –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã —á–µ—Ä–µ–∑ –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—é —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.'
        },
        {
            'question': '–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏?',
            'options': [
                '–ó–∞—â–∏—â–µ–Ω–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏ –∞—Ç–∞–∫',
                '–°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã',
                '–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã',
                '–í–Ω–µ—à–Ω–∏–π –≤–∏–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞'
            ],
            'correct': 0,
            'explanation': 'Security testing –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—è–∑–≤–∏–º–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã: SQL injection, XSS, CSRF –∏ –¥—Ä—É–≥–∏–µ –∞—Ç–∞–∫–∏.'
        }
    ],
    'senior': [
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ Test Driven Development (TDD)?',
            'options': [
                '–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –≥–¥–µ —Ç–µ—Å—Ç—ã –ø–∏—à—É—Ç—Å—è –¥–æ –∫–æ–¥–∞',
                '–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è, –≥–¥–µ —Ç–µ—Å—Ç—ã –ø–∏—à—É—Ç—Å—è –ø–æ—Å–ª–µ –∫–æ–¥–∞',
                '–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è',
                '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è'
            ],
            'correct': 0,
            'explanation': 'TDD: Red (–ø–∏—à–µ–º —Ç–µ—Å—Ç) ‚Üí Green (–ø–∏—à–µ–º –∫–æ–¥) ‚Üí Refactor (—É–ª—É—á—à–∞–µ–º –∫–æ–¥).'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ Behavior Driven Development (BDD)?',
            'options': [
                '–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ –æ–ø–∏—Å–∞–Ω–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã',
                '–¢–∏–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö',
                '–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏',
                '–ü—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö'
            ],
            'correct': 0,
            'explanation': 'BDD –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫ (Given-When-Then) –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã.'
        },
        {
            'question': '–ö–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –≤—ã –∑–Ω–∞–µ—Ç–µ?',
            'options': [
                'Code Coverage, Cyclomatic Complexity, Technical Debt',
                '–¢–æ–ª—å–∫–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞',
                '–¢–æ–ª—å–∫–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π',
                '–¢–æ–ª—å–∫–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∞—Å—Å–æ–≤'
            ],
            'correct': 0,
            'explanation': '–ú–µ—Ç—Ä–∏–∫–∏ –ø–æ–º–æ–≥–∞—é—Ç –æ–±—ä–µ–∫—Ç–∏–≤–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –∏ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏.'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ Contract Testing?',
            'options': [
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –º–µ–∂–¥—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö'
            ],
            'correct': 0,
            'explanation': 'Contract testing –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–µ–π –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ Pact).'
        },
        {
            'question': '–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞ –ø–æ–∏—Å–∫ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ —Å–ª—É—á–∞–π–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ?',
            'options': [
                'Fuzz Testing (—Ñ–∞–∑–∑–∏–Ω–≥)',
                'Unit Testing',
                'Integration Testing',
                'Smoke Testing'
            ],
            'correct': 0,
            'explanation': 'Fuzzing –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ/–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏ –∫—Ä–∞—à.'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ Chaos Engineering?',
            'options': [
                '–ü—Ä–∞–∫—Ç–∏–∫–∞ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –æ—Ç–∫–∞–∑–æ–≤ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏',
                '–ë–µ—Å–ø–æ—Ä—è–¥–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –ø–ª–∞–Ω–∞',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö–∞–æ—Ç–∏—á–Ω–æ–≥–æ –∫–æ–¥–∞'
            ],
            'correct': 0,
            'explanation': 'Chaos Engineering (Netflix Chaos Monkey) - –ø—Ä–µ–¥–Ω–∞–º–µ—Ä–µ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–±–æ–µ–≤ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.'
        },
        {
            'question': '–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∏ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏?',
            'options': [
                '–ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—á–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏',
                '–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ',
                '–£–¥–æ–±—Å—Ç–≤–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞',
                '–¶–≤–µ—Ç–∞ –¥–∏–∑–∞–π–Ω–∞'
            ],
            'correct': 0,
            'explanation': 'Stress testing –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ—á–∫—É –æ—Ç–∫–∞–∑–∞ —Å–∏—Å—Ç–µ–º—ã –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö.'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ Shift-Left Testing?',
            'options': [
                '–ü–æ–¥—Ö–æ–¥, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞ —Ä–∞–Ω–Ω–∏—Ö —ç—Ç–∞–ø–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–µ–≤–æ–π —á–∞—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–µ–≤–æ–π –∫–Ω–æ–ø–∫–∏ –º—ã—à–∏',
                '–ü–µ—Ä–µ–Ω–æ—Å —Ç–µ—Å—Ç–æ–≤ –≤–ª–µ–≤–æ –≤ –∫–æ–¥–µ'
            ],
            'correct': 0,
            'explanation': 'Shift-Left - —Ä–∞–Ω–Ω–µ–µ –≤–æ–≤–ª–µ—á–µ–Ω–∏–µ QA –≤ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –±–∞–≥–æ–≤.'
        },
        {
            'question': '–ö–∞–∫–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏?',
            'options': [
                'Test Data Builder, Object Mother, Fixture',
                '–¢–æ–ª—å–∫–æ Singleton',
                '–¢–æ–ª—å–∫–æ Factory',
                '–¢–æ–ª—å–∫–æ Observer'
            ],
            'correct': 0,
            'explanation': '–≠—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–º–æ–≥–∞—é—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.'
        },
        {
            'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?',
            'options': [
                '–ú–µ—Ç–æ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–≤—É—Ö –≤–µ—Ä—Å–∏–π –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ª—É—á—à–µ–π',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—É–∫–≤ –∞–ª—Ñ–∞–≤–∏—Ç–∞',
                '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö –¥–≤—É—Ö —Ñ—É–Ω–∫—Ü–∏–π',
                '–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ unit-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è'
            ],
            'correct': 0,
            'explanation': 'A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π.'
        }
    ]
}

# –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
user_data = {}

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–°—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤—ã–±–æ—Ä–æ–º —É—Ä–æ–≤–Ω—è"""
    keyboard = [
        [InlineKeyboardButton("Junior QA Engineer üå±", callback_data='level_junior')],
        [InlineKeyboardButton("Middle QA Engineer üöÄ", callback_data='level_middle')],
        [InlineKeyboardButton("Senior QA Engineer üëë", callback_data='level_senior')]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    welcome_text = (
        'üëã –ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—é –Ω–∞ QA Engineer.\n\n'
        'üìö –ß—Ç–æ —è —É–º–µ—é:\n'
        '‚Ä¢ –ü—Ä–æ–≤–µ—Ä—é —Ç–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –ø–æ QA\n'
        '‚Ä¢ –ü–æ–∫–∞–∂—É –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏\n'
        '‚Ä¢ –î–∞–º –ø–æ–¥—Ä–æ–±–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É\n\n'
        'üéØ –í—ã–±–µ—Ä–∏ —Å–≤–æ–π —É—Ä–æ–≤–µ–Ω—å –∏ –Ω–∞—á–Ω–∏ —Ç–µ—Å—Ç:'
    )
    
    await update.message.reply_text(welcome_text, reply_markup=reply_markup)

async def button_callback(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏"""
    query = update.callback_query
    await query.answer()
    
    user_id = query.from_user.id
    
    # –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è
    if query.data.startswith('level_'):
        level = query.data.replace('level_', '')
        user_data[user_id] = {
            'level': level,
            'questions': random.sample(QUESTIONS[level], len(QUESTIONS[level])),
            'current_question': 0,
            'correct_answers': 0,
            'total_questions': len(QUESTIONS[level])
        }
        await send_question(query, user_id)
    
    # –û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å
    elif query.data.startswith('answer_'):
        answer_idx = int(query.data.replace('answer_', ''))
        await check_answer(query, user_id, answer_idx)

async def send_question(query, user_id: int) -> None:
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é"""
    data = user_data[user_id]
    
    if data['current_question'] >= data['total_questions']:
        await show_results(query, user_id)
        return
    
    question_data = data['questions'][data['current_question']]
    question_num = data['current_question'] + 1
    
    # –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤
    keyboard = []
    for idx, option in enumerate(question_data['options']):
        keyboard.append([InlineKeyboardButton(option, callback_data=f'answer_{idx}')])
    
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    level_emoji = {'junior': 'üå±', 'middle': 'üöÄ', 'senior': 'üëë'}
    
    question_text = (
        f"{level_emoji[data['level']]} –í–æ–ø—Ä–æ—Å {question_num}/{data['total_questions']}\n\n"
        f"‚ùì {question_data['question']}"
    )
    
    await query.edit_message_text(question_text, reply_markup=reply_markup)

async def check_answer(query, user_id: int, answer_idx: int) -> None:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    data = user_data[user_id]
    question_data = data['questions'][data['current_question']]
    
    is_correct = answer_idx == question_data['correct']
    
    if is_correct:
        data['correct_answers'] += 1
        message = (
            "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!\n\n"
            f"üí° {question_data.get('explanation', '')}"
        )
    else:
        correct_answer = question_data['options'][question_data['correct']]
        message = (
            f"‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!\n\n"
            f"–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:\n{correct_answer}\n\n"
            f"üí° {question_data.get('explanation', '')}"
        )
    
    data['current_question'] += 1
    
    # –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
    keyboard = [[InlineKeyboardButton("–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å ‚û°Ô∏è", callback_data='next_question')]]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    await query.edit_message_text(message, reply_markup=reply_markup)

async def next_question_callback(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É"""
    query = update.callback_query
    await query.answer()
    user_id = query.from_user.id
    await send_question(query, user_id)

async def show_results(query, user_id: int) -> None:
    """–ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"""
    data = user_data[user_id]
    correct = data['correct_answers']
    total = data['total_questions']
    percentage = (correct / total) * 100
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ—Ü–µ–Ω–∫—É
    if percentage >= 90:
        grade = "–û—Ç–ª–∏—á–Ω–æ! üåü"
        comment = "–¢—ã –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—é!"
    elif percentage >= 70:
        grade = "–•–æ—Ä–æ—à–æ! üëç"
        comment = "–ù–µ–ø–ª–æ—Ö–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–æ –µ—Å—Ç—å –∫—É–¥–∞ —Ä–∞—Å—Ç–∏."
    elif percentage >= 50:
        grade = "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ üìö"
        comment = "–°—Ç–æ–∏—Ç –ø–æ–¥—Ç—è–Ω—É—Ç—å –∑–Ω–∞–Ω–∏—è –ø–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º —Ç–µ–º–∞–º."
    else:
        grade = "–ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ üí™"
        comment = "–†–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑."
    
    level_names = {
        'junior': 'Junior QA Engineer üå±',
        'middle': 'Middle QA Engineer üöÄ',
        'senior': 'Senior QA Engineer üëë'
    }
    
    keyboard = [
        [InlineKeyboardButton("–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ üîÑ", callback_data=f"level_{data['level']}")],
        [InlineKeyboardButton("–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π —É—Ä–æ–≤–µ–Ω—å üéØ", callback_data='choose_level')]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    results_text = (
        f"üéì –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞\n"
        f"{'='*25}\n\n"
        f"–£—Ä–æ–≤–µ–Ω—å: {level_names[data['level']]}\n"
        f"–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: {correct}/{total}\n"
        f"–ü—Ä–æ—Ü–µ–Ω—Ç: {percentage:.1f}%\n\n"
        f"{grade}\n"
        f"{comment}"
    )
    
    await query.edit_message_text(results_text, reply_markup=reply_markup)

async def choose_level_callback(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–í–æ–∑–≤—Ä–∞—Ç –∫ –≤—ã–±–æ—Ä—É —É—Ä–æ–≤–Ω—è"""
    query = update.callback_query
    await query.answer()
    
    keyboard = [
        [InlineKeyboardButton("Junior QA Engineer üå±", callback_data='level_junior')],
        [InlineKeyboardButton("Middle QA Engineer üöÄ", callback_data='level_middle')],
        [InlineKeyboardButton("Senior QA Engineer üëë", callback_data='level_senior')]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    await query.edit_message_text(
        'üéØ –í—ã–±–µ—Ä–∏ —É—Ä–æ–≤–µ–Ω—å –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞:',
        reply_markup=reply_markup
    )

def main() -> None:
    """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞"""
    # –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
    token = os.getenv('BOT_TOKEN')
    
    if not token:
        logger.error("‚ùå –û—à–∏–±–∫–∞: –ù–µ —É–∫–∞–∑–∞–Ω —Ç–æ–∫–µ–Ω –±–æ—Ç–∞!")
        logger.error("–£–∫–∞–∂–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è BOT_TOKEN")
        return
    
    logger.info("üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞...")
    application = Application.builder().token(token).build()

    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
    application.add_handler(CommandHandler("start", start))
    application.add_handler(CallbackQueryHandler(button_callback, pattern='^(level_|answer_)'))
    application.add_handler(CallbackQueryHandler(next_question_callback, pattern='^next_question$'))
    application.add_handler(CallbackQueryHandler(choose_level_callback, pattern='^choose_level$'))

    # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
    logger.info("ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")
    application.run_polling(allowed_updates=Update.ALL_TYPES)

if __name__ == '__main__':
    main()
